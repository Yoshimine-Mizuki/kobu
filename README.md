# 鼓舞Webサイト開発マニュアル
## 概要
鼓舞のWebサイトを開発する際の手順について記載しています。

手順に変更があった場合は、このREADME.mdに追記をお願いします。

URL : http://www2.jimu.nagoya-u.ac.jp/minzokuonbu/

210905 ミリオン

## ディレクトリ構造
鼓舞のWebサイトのディレクトリ構造です。

各ページを開発する際は、以下のディレクトリ内のファイルを編集してください。

新規でファイルを追加した場合は、必要に応じてディレクトリ構造を更新してください。

```
kobu/
├── 404/ : 要求されたファイルが見つからない場合に表示されるページ
├── About/「鼓舞とは」のページ
├── Contact/ : 「お問い合わせ」ページ
├── Info/ : 「お知らせ」ページ
├── Link/ : 「リンク」ページ
├── OBOG/
│   ├── apparatus.html : 「装置チェック」ページ
│   ├──  index.html : 認証用ページ
│   ├── onbunote.html : 「団員専用ページ」
│   └── apparatus_db.json : 「装置チェック」データベース
├── Performances/ : 「舞台紹介」ページ
├── Programs/ : 「演目紹介」ページ
├── resources/
│   ├── css/style.css : スタイルシート
│   ├──  images/ : 画像格納ディレクトリ
│   ├── data.json : 演目紹介の文章
│   └── info.json : お知らせの文章
└── index.html : トップページ
```

## 開発について
以下のような場合、鼓舞のWebサイトの開発を行います。

* 新歓・公演がある場合に「お知らせ」ページの編集
* 公演を行った場合に「舞台紹介」ページの編集
* レパの追加・廃止の場合に「演目紹介」ページの編集
* 不具合修正
* その他

## 開発手順
以下、Webサイト開発時の手順です。特にチームで開発を行うときは、この手順に沿って開発を行ってください。

1. 新規承認
2. issue作成
3. 開発
4. MR・ソースチェック
5. リリース

### 1. 新規承認
開発を行う前に、LINEグループなどで開発について周知し、他のメンバーから承認を得てください。

### 2. issue作成
開発の承認が得られたらGitlab上でissueを作成してください。issueの作成は以下のテンプレートに従ってください。

```
Title : #{issue番号}: {開発のタイトル}
Type : issue
Description : {開発の概要・仕様}
```

{issue番号}は00001から5桁の連番でつけてください。そのほかは基本的に指定しなくて大丈夫です。

### 3. 開発
開発を行います。開発を行う前に必ずmasterブランチを最新にしてください。

```
$ git co master
$ git pull
```

ブランチは以下の通り作成してください。

```
developブランチ(devブランチ) : dev/{issue番号}
featureブランチ(featブランチ) : feat/{さ名}/{issue番号}
```

devブランチはチームで開発を行う場合必ず作成し、作成後すぐpushして、マージリクエスト(MR)を作成してください。MRを作成したら、MRのURLをissueのdescriptionに追記してください。MRの作成方法は4で解説しています。

```
$ git co -b dev/{issue番号}
$ git push origin dev/{issue番号}
$ git co -b feat/{さ名}/{issue番号}
```

コードの編集はディレクトリ構造を参考にしてください。新しいディレクトリやファイルを作成した場合、ディレクトリ構造に追記してくでさい。スタイルはresources/css/style.cssを編集、画像はresources/imagesに追加してください。

コードの編集が完了したらリモートリポジトリへpushしてください。以下、プロジェクトのルートディレクトリで実行してください。

```
$ git add .
$ git ci -m "#{isuue番号} {コミットメッセージ}"
$ git push origin {ブランチ名}
```

{コミットメッセージ}は、コミットの内容を具体的に記述してください、

コミットメッセージ例:
#00001 マニュアルの追記

### 4. MR・ソースチェック
担当の開発全体が完了しコードをpushできたら、MRを作成してください。

1. New…(Search Gitlabの左の+ボタン) → New marge request
2. Select source branchから作成したブランチを選択し(devブランチがある場合は、Target branchをmasterからdevに変更)、Compare branches and continueをクリック
3. Titleはissueタイトル、必要に応じてDescriptionに開発概要を記述し、Changesタブから自分の編集したコードが正しいか確認し、Create merge requestをクリック

MRの作成が完了したら他のメンバーにURLを共有し、ソースチェックを行ってください。ソースチェックが完了したら権限のある人がMRをApproveしてください。

### 5. リリース
Approveした人が、FTPソフトなどを利用してで鼓舞のサイトにファイルをアップロードしてください。

これで、開発は完了です。
